<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{layout/layout}"
      lang="ko">

<div layout:fragment="content">
    <style>
          .btn1 {
        border: 1px solid;
        background-color: white;
        width: 300px;
        height: 100px;
        margin-top: 50px;
        margin-left: 150px;
        margin-right: 150px;
        text-align: center;
        align-items: center;
        justify-content: center;
      }
            .clicked {
        background-color: #87ceeb;
      }
      h5 {
      margin-left: 50px;
      margin-right: 50px;
      }
</style>
    <div class="row">
        <h1>구매 페이지</h1>
        <h3 th:if="${num}" th:text="|선택한 좌석 : ${num}번|"></h3>
        <br><br><br><br>
        <div class="col-4">
            <h5 >실시간권</h5>
            <button class="btn1 900" >15분당 300원</button>

        </div>
        <div class="col-4">
            <h5>시간권</h5>
            <button class="btn1 10800" >3시간권 3,000원</button>
            <button class="btn1 21600">6시간권 5,000원</button>
            <button class="btn1 43200">12시간권 9,000원</button>


        </div>
        <div class="col-4">
            <h5>무제한권</h5>
            <button class="btn1" >1일 무제한 5,000원</button>
            <button class="btn1">1주일 무제한 30,000원</button>
            <button class="btn1">30일 무제한 11,000원</button>
            <br><br><br><br>
            <a class="btn btn-primary sub">결제하기</a>
            <a role="button" class="btn btn-primary" style=" margin-left:20px" href="/reserve/clear">뒤로가기</a>
        </div>
<!--        <div class="col-1">-->
<!--            -->
<!--        </div>-->
        <script th:inline="javascript">
    var message = [[${msg}]];
        if(message) {
            alert(message);
        }
    </script>
        <script>
    var div2 = document.getElementsByClassName("btn1");
    var sub = document.getElementsByClassName("sub");

      function postValue(event) {
      for(var i = 0; i < div2.length; i++) {
      if(div2[i].classList[2] === "clicked") {
            location.href="/mypage?time="+div2[i].classList[1];
      }}}

      function handleClick(event) {
        console.log(event.target);
        // console.log(this);
        // 콘솔창을 보면 둘다 동일한 값이 나온다

        console.log(event.target.classList);

        if (event.target.classList[2] === "clicked") {
          event.target.classList.remove("clicked");
        } else {
          for (var i = 0; i < div2.length; i++) {
            div2[i].classList.remove("clicked");
          }

          event.target.classList.add("clicked");

        }
      }

      function init() {
        for (var i = 0; i < div2.length; i++) {
          div2[i].addEventListener("click", handleClick);
        }
        sub[0].addEventListener("click", postValue);
      }

      init();
</script>
    </div>
</div>

</html>